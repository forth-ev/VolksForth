\ Zum Bearbeiten von C64-Screens                     clv 04jul89                                                                Das Format der C64 & c16- screens ist 40 x 25, wobei            Spalte 41 noch 24 blanks enth„lt, die allerdings                vom Editor nicht erreichbar sind (40*25+24=1024).                                                                               Um dieses Fileformat verarbeiten zu k”nnen, sind folgende       Žnderungen erforderlich:                                        - System: Die Layout-orientierten Kommentarzeichen (insb. \)      erfordern Žnderung, ebenso LIST                               - Editor                                                        - Drucker-Treiber                                               - TESTBLOCK zum testen dieser Žnderungen                        - SEARCH0 REPLACE0 WIPE0 zum Bearbeiten sinnloser Bin„rdaten                                                                                                                                    \ c/l l/s patchen:  60x25/scr 64x16/scr              clv 04jul89                                                                include editorCB.scr ( s.Screen 5 folgende )                                                                                    : 40x25      &41  ['] c/l >body !   &25  ['] l/s >body !                     [ printer ]  8/"   [ editor ]  0 ['] dy >body ! ;  : 64x16      &64  ['] c/l >body !   &16  ['] l/s >body !                     [ printer ] 6/"    [ editor ]  1 ['] dy >body ! ;                                                                  include EPSON.PRN   3 load                                      ' 40x25 Is 'cold                                                full  savesystem cbm.com                                                                                                        \\ bei Druckertreibern,                                            die 8/" selbst setzten (z.B. GRAPHIC.PRN),                      muá 8/" in NORMAL aufgenommen werden.                        \ testblock                                          clv 04jul89                                                                  : testblock  ( blk -- )                                            base push  c/l base !                                           b/blk 0 DO                                                                 I extend <# # #> drop c@                                        over block  I +  c!                                             LOOP                                                 b/blk 0 DO I c/l /  extend <# Ascii : hold  # #> drop @                    over block  I +  !                                              c/l +LOOP drop  update ;                                                                                        \ zum Testen verschiedener Screenformate. Ausgabe s.SCR 4                                                                                                                                                                                                       \ search0 replace0                                   clv 28jun89                                                                   : ?abort  stop? abort" aborted" ;                               Defer (action0                                                  : action0                                                          capacity 0 DO  I block b/blk bounds DO  ?abort                    I c@ 0= IF J I (action0 THEN LOOP LOOP ;                                                                                   : (search0   ( scr adr -- ) drop               ?cr . ;          : (replace0  ( scr adr -- ) bl swap c!         ?cr . ;          : (wipe0     ( scr adr -- )                                        drop  dup block b/blk bl fill  update   ?cr . ;              : search0    ['] (search0  Is (action0  action0 ;               : replace0   ['] (replace0 Is (action0  action0 ;               : wipe0      ['] (wipe0    Is (action0  action0 ;                                                                            0:23456789ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijkclv 04jul891:23456789ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuv2:23456789ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuv3:23456789ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuv4:23456789ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuv5:23456789ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuv6:23456789ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuv7:23456789ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuv8:23456789ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuv9:23456789ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvA:23456789ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvB:23456789ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvC:23456789ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvD:23456789ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvE:23456789ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvF:23456789ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuv\\ EDITORCB.SCR enth„lt gegenber EDITOR.SCR         clv 04jul89   folgende Žnderungen (volksFORTH 3.8.1-2)                                                                                     Screen 11:                                                           $0E # W add   W W add   A I xchg   c/l # C mov             -->  $0E # W add   W W add   A I xchg   ' c/l >body #) C mov                                                                         dup 1+ c/row * swap c/l * 'start + video@ (.line ;         -->  dup dy + c/row * swap c/l * 'start + video@ (.line ;                                                                       Screen 12:                                                           c/l # C mov   [[  byte lods   stos   C0= ?]                -->  ' c/l >body #) C mov  [[  byte lods   stos   C0= ?]                                                                             dup 1+ c/row * swap c/l * 'start + video@ (.line ;         -->  dup dy + c/row * swap c/l * 'start + video@ (.line ;       